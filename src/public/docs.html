<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Pingui Alert - Simple Alerts for Developers documentation in english" />
    <meta name="keywords" content="Pingui Alert, Alerts, Developers, Simple Alerts, Pingui Alert Documentation" />
    <link rel="shortcut icon" href="./public/images/pinguiAlert-icon.png" type="image/x-icon" />
    <title>Documentation - Pingui Alert</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600;700&family=JetBrains+Mono:wght@400;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../public/css/styles.css" />
  </head>
  <body>
    <nav class="navbar">
      <div class="logo">
        <img src="../public/images/PinguiAlert1.png" alt="Pingui Alert" style="width: 30%" />
        <a href="/" style="text-decoration: none; color: inherit">Pingui Alert</a> <span class="badge">Beta</span>
      </div>
      <div class="nav-links">
        <a href="/docs" class="nav-link active">Documentation</a>
        <a href="https://github.com/juanvidev1/pingui-alert" target="_blank" class="nav-link">GitHub</a>
        <a href="/docs/es" class="nav-link" style="display: flex; align-items: center; gap: 0.25rem">
          <span style="font-size: 1.1em">üá™üá∏</span> ES
        </a>
      </div>
    </nav>

    <div class="docs-container">
      <aside class="sidebar">
        <details class="sidebar-group">
          <summary>
            <h3>Getting Started</h3>
          </summary>
          <a href="#introduction" class="sidebar-link">Introduction</a>
          <a href="#setup" class="sidebar-link">Setup & Auth</a>
        </details>
        <details class="sidebar-group">
          <summary>
            <h3>Best Practices</h3>
          </summary>
          <a href="#commandments" class="sidebar-link">The Commandments</a>
          <a href="#production-usage" class="sidebar-link">Production Usage</a>
        </details>
        <details class="sidebar-group">
          <summary>
            <h3>API Reference</h3>
          </summary>
          <a href="#send-alert" class="sidebar-link">Send Alert</a>
          <a href="#create-integration" class="sidebar-link">Create Integration</a>
          <a href="#get-integration" class="sidebar-link">Get Integration</a>
          <a href="#update-rate-limit" class="sidebar-link">Update Rate Limit</a>
          <a href="#revoke-integration" class="sidebar-link">Revoke Integration</a>
          <a href="#check-quota" class="sidebar-link">Check Quota</a>
        </details>
        <details class="sidebar-group">
          <summary>
            <h3>SDKs</h3>
          </summary>
          <a href="#npm-package" class="sidebar-link">Node.js / TypeScript</a>
        </details>
        <details class="sidebar-group">
          <summary>
            <h3>Use cases</h3>
          </summary>
          <a href="#use-cases" class="sidebar-link">Use cases</a>
        </details>
      </aside>

      <main class="docs-content">
        <!-- Introduction -->
        <section id="introduction">
          <h1>Introduction</h1>
          <p>
            Pingui Alert is a lightweight notification service that allows you to send alerts to your Telegram account
            directly from your code. It's designed to be dead simple to use, with zero configuration required on your
            server.
          </p>
        </section>

        <!-- Setup & Authentication -->
        <section id="setup">
          <h2>Setup & Authentication</h2>
          <p>To start sending alerts, you need to obtain an API Key from our Telegram bot.</p>
          <ol class="steps-list">
            <li>Open Telegram and search for <strong>@PinguiAlertBot</strong> (or your hosted bot instance).</li>
            <li>Start a chat and send the command <code>/start</code> to register.</li>
            <li>
              Send the command <code>/temporal_token</code> to get a temporary access token. (Once you create your first
              integration, you will get a new permanent token)
            </li>
            <li>Use the API to create your first integration and start sending alerts.</li>
          </ol>
          <div class="info-box">
            <strong>Note:</strong> The service is completely free. The 10 alerts per day limit helps prevent service
            degradation due to Telegram API rate limits and server capacity constraints on @PinguiAlertBot. If your
            instance is self-hosted, you can increase the limit by setting the <code>MAX_ALERTS</code> environment
            variable.
          </div>
        </section>

        <!-- Commandments -->
        <section id="commandments">
          <h2>The Commandments</h2>
          <p>
            To keep Pingui Alert useful and stable for everyone, we adhere to a strict set of rules. Follow these
            commandments to ensure the best experience.
          </p>

          <div class="info-box" style="border-left-color: var(--accent-secondary); background: rgba(139, 92, 246, 0.1)">
            <strong>üìú The Golden Rule:</strong> Pingui Alert is for <em>actionable, critical</em> incidents. It is not
            a logging service.
          </div>

          <ol class="steps-list" style="counter-reset: commandments">
            <li style="list-style: none; counter-increment: commandments">
              <strong style="font-size: 1.1em; color: var(--accent-primary)">I. Critical Use Only</strong><br />
              You shall use it only for critical alerts that must be corrected immediately. Design your system to
              trigger these alerts sparingly‚Äîonly once per incident type (avoid alert storms).
            </li>
            <li style="list-style: none; counter-increment: commandments">
              <strong style="font-size: 1.1em; color: var(--accent-primary)">II. Production Standards</strong><br />
              If you send errors from your API using our bot, you must follow production best practices. Ensure your
              error handling is robust before piping it to an alert.
            </li>
            <li style="list-style: none; counter-increment: commandments">
              <strong style="font-size: 1.1em; color: var(--accent-primary)">III. Self-Host for Customization</strong
              ><br />
              If you require <em>any</em> customization (no matter how simple), you shall use the self-hosted option.
              You can host Pingui Alert anywhere; we suggest a VPS or a local server due to its minimal resource
              footprint, but cloud options are also valid.
            </li>
            <li style="list-style: none; counter-increment: commandments">
              <strong style="font-size: 1.1em; color: var(--accent-primary)">IV. Actionable Alerts</strong><br />
              You shall ensure every alert is actionable. Every alert should prompt a specific, immediate response.
            </li>
            <li style="list-style: none; counter-increment: commandments">
              <strong style="font-size: 1.1em; color: var(--accent-primary)">V. No Data Leakage</strong><br />
              You shall not send sensitive user data (PII), identifiers, or secrets in your alerts. Keep messages safe
              and compliant.
            </li>
            <li style="list-style: none; counter-increment: commandments">
              <strong style="font-size: 1.1em; color: var(--accent-primary)">VI. Fail Safely</strong><br />
              You shall implement error handling so that a failed alert notification never crashes your main
              application. The alert service failure should be silent to your end users.
            </li>
          </ol>
        </section>

        <!-- Production Usage -->
        <section id="production-usage">
          <h2>Production Usage</h2>
          <p>
            When using Pingui Alert in production environments, follow these best practices to ensure optimal service
            quality for everyone.
          </p>

          <div class="info-box" style="background: rgba(251, 146, 60, 0.1); border-left-color: #fb923c">
            <strong>‚ö†Ô∏è Important:</strong> If you're using the hosted <strong>@PinguiAlertBot</strong> instance in
            production, please reserve it <strong>exclusively for critical alerts</strong> (e.g., system failures,
            security incidents, critical errors). This helps maintain service availability for all users.
          </div>

          <h3>Recommended Production Setup</h3>
          <p>For production workloads with frequent notifications, we recommend one of these approaches:</p>

          <ul class="steps-list">
            <li>
              <strong>Self-Host Your Instance:</strong> Deploy your own Pingui Alert server and bot. This gives you full
              control over rate limits and ensures dedicated resources.
            </li>
            <li>
              <strong>Use for Critical Alerts Only:</strong> If using @PinguiAlertBot, implement filtering logic to send
              only high-priority notifications (failures, errors, security events).
            </li>
            <li>
              <strong>Implement Batching:</strong> Group multiple non-critical alerts into periodic summary messages
              instead of sending individual notifications.
            </li>
          </ul>

          <h3>Self-Hosting</h3>
          <p>To self-host Pingui Alert:</p>
          <pre><code>git clone https://github.com/juanvidev1/pingui-alert
cd pingui-alert

# Set your environment variables
export BOT_TOKEN="your_telegram_bot_token"
export JWT_SECRET="your_secret_key"
export MAX_ALERTS=100  # Customize your daily limit

# Install dependencies
pnpm install

# Run the server
pnpm run dev</code></pre>
        </section>

        <h2>API Reference</h2>
        <p>Here you can find the API reference for the Pingui Alert service.</p>
        <!-- Send Alert -->
        <details>
          <summary id="send-alert">
            <h2>Send an Alert</h2>
            <p>Send a POST request to the <code>/alert</code> endpoint to deliver a message.</p>
          </summary>

          <section>
            <h2>Send an Alert</h2>
            <p>Send a POST request to the <code>/alert</code> endpoint to deliver a message.</p>

            <div class="endpoint-badge">POST /alert</div>

            <h3>Headers</h3>
            <table class="docs-table">
              <thead>
                <tr>
                  <th>Header</th>
                  <th>Value</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>Authorization</code></td>
                  <td><code>Bearer &lt;YOUR_API_KEY&gt;</code></td>
                  <td>Your permanent JWT token received from <code>/createIntegration</code> endpoint.</td>
                </tr>
                <tr>
                  <td><code>Content-Type</code></td>
                  <td><code>application/json</code></td>
                  <td>Required.</td>
                </tr>
              </tbody>
            </table>

            <h3>Body</h3>
            <pre><code>{
    "title": "Your title here",
    "message": "Your message here",
    "chatId": "The telegram chat id where the alert will be sent"
  }</code></pre>

            <h3>Example (cURL)</h3>
            <pre><code>curl -X POST https://api.pingui.com/alert \
    -H "Authorization: Bearer YOUR_TOKEN" \
    -H "Content-Type: application/json" \
    -d '{"title": "Your title here", "message": "Your message here", "chatId": "The telegram chat id where the alert will be sent"}'</code></pre>
          </section>
        </details>

        <!-- Create Integration -->
        <details>
          <summary id="create-integration">
            <h2>Create Integration</h2>
            <p>
              Create a new integration for a specific chat using the temporal token. The scope is a string open to the
              user criteria
            </p>
          </summary>

          <div class="endpoint-badge">POST /createIntegration</div>

          <h3>Headers</h3>
          <table class="docs-table">
            <thead>
              <tr>
                <th>Header</th>
                <th>Value</th>
                <th>Description</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td><code>Authorization</code></td>
                <td><code>Bearer &lt;TEMPORAL_TOKEN&gt;</code></td>
                <td>The temporal token received from the /temporal_token command.</td>
              </tr>
              <tr>
                <td><code>Content-Type</code></td>
                <td><code>application/json</code></td>
                <td>Required.</td>
              </tr>
            </tbody>
          </table>

          <h3>Body</h3>
          <pre><code>{
  "chatId": 123456789,
  "scope": "prod"
}</code></pre>

          <h3>Example (cURL)</h3>
          <pre><code>curl -X POST https://api.pingui-alert.dev/createIntegration \
  -H "Authorization: Bearer YOUR_TEMPORAL_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"chatId": 123456789, "scope": "prod"}'</code></pre>
        </section>
        </details>

        <!-- Get Integration -->
        <details>
          <summary id="get-integration">
            <h2>Get Integration</h2>
            <p>Retrieve details about a specific integration.</p>
          </summary>
          <section>
            <h2>Get Integration</h2>
            <p>Retrieve details about a specific integration.</p>
  
            <div
              class="endpoint-badge"
              style="color: #3b82f6; background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.3)"
            >
              GET /integrations/:chatId
            </div>
  
            <h3>Headers</h3>
            <table class="docs-table">
              <thead>
                <tr>
                  <th>Header</th>
                  <th>Value</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>Authorization</code></td>
                  <td><code>Bearer &lt;YOUR_API_KEY&gt;</code></td>
                  <td>Your JWT token (API Key).</td>
                </tr>
              </tbody>
            </table>
  
            <h3>Example (cURL)</h3>
            <pre><code>curl -X GET https://api.pingui-alert.dev/integrations/123456789 \
    -H "Authorization: Bearer YOUR_API_KEY"</code></pre>
          </section>
        </details>
        
        <!-- Update Rate Limit -->
        <details>
          <summary id="update-rate-limit">
            <h2>Update Rate Limit</h2>
            <p>Update the rate limit for a specific integration.</p>
          </summary>
          <section>
            
  
            <div
              class="endpoint-badge"
              style="color: #3b82f6; background: rgba(59, 130, 246, 0.15); border-color: rgba(59, 130, 246, 0.3)"
            >
              POST /updateRateLimit
            </div>
  
            <h3>Headers</h3>
            <table class="docs-table">
              <thead>
                <tr>
                  <th>Header</th>
                  <th>Value</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>Authorization</code></td>
                  <td><code>Bearer &lt;YOUR_API_KEY&gt;</code></td>
                  <td>Your JWT token (API Key).</td>
                </tr>
                <tr>
                  <td><code>Content-Type</code></td>
                  <td><code>application/json</code></td>
                  <td>Required.</td>
                </tr>
              </tbody>
            </table>
  
            <h3>Body</h3>
            <pre><code>{
    "chatId": 123456789,
    "rateLimit": 50
  }</code></pre>
  
            <h3>Example (cURL)</h3>
            <pre><code>curl -X POST https://api.pingui-alert.dev/updateRateLimit \
    -H "Authorization: Bearer YOUR_API_KEY" \
    -H "Content-Type: application/json" \
    -d '{"chatId": 123456789, "rateLimit": 50}'</code></pre>
          </section>
        </details>

        <!-- Revoke Integration -->
         <details>
          <summary id="revoke-integration">
            <h2>Revoke Integration</h2>
            <p>Revoke (deactivate) an integration.</p>
          </summary>
          <section>
            <div class="endpoint-badge">POST /revokeIntegration</div>
  
            <h3>Headers</h3>
            <table class="docs-table">
              <thead>
                <tr>
                  <th>Header</th>
                  <th>Value</th>
                  <th>Description</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td><code>Authorization</code></td>
                  <td><code>Bearer &lt;YOUR_API_KEY&gt;</code></td>
                  <td>Your JWT token (API Key).</td>
                </tr>
                <tr>
                  <td><code>Content-Type</code></td>
                  <td><code>application/json</code></td>
                  <td>Required.</td>
                </tr>
              </tbody>
            </table>
  
            <h3>Body</h3>
            <pre><code>{
    "chatId": 123456789
  }</code></pre>
  
            <h3>Example (cURL)</h3>
            <pre><code>curl -X POST https://api.pingui-alert.dev/revokeIntegration \
    -H "Authorization: Bearer YOUR_API_KEY" \
    -H "Content-Type: application/json" \
    -d '{"chatId": 123456789}'</code></pre>
          </section>
         </details>

        <section id="npm-package">
          <h2>NPM Package</h2>
          <p>
            If you are using Node.js or TypeScript, we recommend using our official package in case you just want to
            send alerts using Pingui Alert server. Rate limit and quota are handled by the server and you need to still
            use the endpoint createIntegration to get your permanent API KEY.
          </p>

          <h3>Installation</h3>
          <pre><code>npm install pingui-alert</code></pre>

          <h3>Usage</h3>
          <ol>
            <li>
              Follow the steps in the <a href="#create-integration">Create Integration</a> section to get your permanent
              API KEY.
            </li>
            <li>On the public bot use the command /get_me to get your chatId.</li>
            <li>Use the API KEY and chatId in the code below:</li>
          </ol>
          <pre><code>import { Pingui } from 'pingui-alert';

const client = new Pingui('YOUR_API_KEY');

await client.send('Database backup completed successfully! ‚úÖ', 'YOUR_CHAT_ID');</code></pre>
        </section>

        <section id="use-cases">
          <h2>Use Cases</h2>
          <p>
            Here are some clear examples of how to apply Pingui Alert in real-world scenarios, strictly adhering to the
            <strong>Commandments</strong>.
          </p>

          <div class="use-case-card" style="margin-bottom: 2rem">
            <h3>1. Critical Error Monitoring (Payment Gateway)</h3>
            <p>
              <strong>Scenario:</strong> A user's payment fails due to a server-side 500 error. <br />
              <strong>Commandments Applied:</strong> I (Critical Use Only), V (No Data Leakage).
            </p>
            <div class="code-window">
              <div class="window-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <div class="window-title">payment.controller.ts</div>
              </div>
              <div class="code-content">
                <pre><code class="language-typescript">try {
  await processPayment(orderId, amount);
} catch (error) {
  // ‚ùå BAD: Sending the full error stack or user PII
  // await client.send(`Payment failed for user ${user.email}: ${error.stack}`);

  // ‚úÖ GOOD: Actionable, specific, safe
  logger.error(error); // Log details locally
  await client.send(
    `üö® <strong>Critical: Payment Gateway Failure</strong>\n` +
    `Gateway: Stripe\n` +
    `OrderId: ${orderId}\n` +
    `Action: Check Stripe Status & Logs immediately.`
  );
}</code></pre>
              </div>
            </div>
          </div>

          <div class="use-case-card" style="margin-bottom: 2rem">
            <h3>2. System Resource Monitoring</h3>
            <p>
              <strong>Scenario:</strong> Server disk space is dangerously low. <br />
              <strong>Commandments Applied:</strong> I (Critical Use Only), IV (Actionable).
            </p>
            <div class="code-window">
              <div class="window-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <div class="window-title">health-check.sh</div>
              </div>
              <div class="code-content">
                <pre><code class="language-bash">#!/bin/bash
USAGE=$(df / | grep / | awk '{ print $5 }' | sed 's/%//g')

# Only alert if usage is > 90% (Critical)
if [ "$USAGE" -gt 90 ]; then
  curl -X POST https://api.pingui-alert.dev/alert \
    -H "Authorization: Bearer $TOKEN" \
    -H "Content-Type: application/json" \
    -d '{
      "alert": "üíæ <strong>Server Disk Critical</strong>\nUsage is at '"$USAGE"'%.\nClean up logs or expand volume NOW."
    }'
fi</code></pre>
              </div>
            </div>
          </div>

          <div class="use-case-card" style="margin-bottom: 2rem">
            <h3>3. Security Incidents</h3>
            <p>
              <strong>Scenario:</strong> Multiple failed login attempts detected from a single IP (Brute Force). <br />
              <strong>Commandments Applied:</strong> I (Critical), V (No PII).
            </p>
            <div class="code-window">
              <div class="window-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <div class="window-title">auth.middleware.ts</div>
              </div>
              <div class="code-content">
                <pre><code class="language-typescript">if (failedAttempts > 10) {
  // Block IP logic...

  // Alert Security Team
  await client.send(
    `üõ°Ô∏è <strong>Security Alert: Brute Force Detected</strong>\n` +
    `IP: ${req.ip}\n` +
    `Attempts: ${failedAttempts}\n` +
    `Action: IP has been temporarily banned. Verify traffic source.`
  );
}</code></pre>
              </div>
            </div>
          </div>

          <div class="use-case-card">
            <h3>4. Background Job Failures</h3>
            <p>
              <strong>Scenario:</strong> A nightly backup job fails. <br />
              <strong>Commandments Applied:</strong> IV (Actionable), VI (Fail Safely).
            </p>
            <div class="code-window">
              <div class="window-header">
                <div class="dot red"></div>
                <div class="dot yellow"></div>
                <div class="dot green"></div>
                <div class="window-title">backup-cron.ts</div>
              </div>
              <div class="code-content">
                <pre><code class="language-typescript">job.on('failed', async (err) => {
  try {
    await client.send(
      `üí• <strong>Backup Job Failed</strong>\n` +
      `Job: nightly_db_backup\n` +
      `Error: Connection timeout\n` +
      `Action: Manually retry backup via admin panel.`
    );
  } catch (alertError) {
    // Fail safely - do not crash the worker if alert fails
    console.error('Failed to send alert:', alertError);
  }
});</code></pre>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>

    <footer>
      <p>&copy; 2025 Pingui Alert. Built with ‚ù§Ô∏è by <a href="https://github.com/juanvidev1">Juan Vicente</a>.</p>
    </footer>
  </body>
</html>
